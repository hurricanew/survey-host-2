# Story 1.3: Survey Creation UI

## Status
Draft

## Story
**As a** Creator,
**I want** a simple interface to input my survey text and see a live preview,
**so that** I can visualize how my survey will appear to respondents before generating the link.

## Acceptance Criteria
1. Dashboard has "Create" button
2. Creation page has text area and file upload
3. A real-time preview is shown
4. "Generate Link" button is present

## Tasks / Subtasks
- [ ] Task 1: Create survey creation page (AC: 1, 2)
  - [ ] Add "Create Survey" button to dashboard
  - [ ] Create new survey creation page route
  - [ ] Implement text area component for survey input
  - [ ] Implement file upload component for text files
  - [ ] Add proper form validation and error handling
- [ ] Task 2: Implement real-time preview functionality (AC: 3)
  - [ ] Create survey preview component
  - [ ] Implement basic text parsing for preview
  - [ ] Set up live preview that updates as user types
  - [ ] Style preview to match target survey appearance
- [ ] Task 3: Add survey generation capability (AC: 4)
  - [ ] Implement "Generate Link" button with proper state management
  - [ ] Add form submission handling
  - [ ] Integrate with authentication state to associate surveys with users
  - [ ] Add loading states and success feedback
- [ ] Task 4: Testing (All ACs)
  - [ ] Create unit tests for survey creation components
  - [ ] Create integration tests for the complete creation flow
  - [ ] Test file upload functionality
  - [ ] Test real-time preview updates

## Dev Notes

### Previous Story Insights
From Story 1.2 completion:
- Project uses Turborepo monorepo with apps/web (Next.js), apps/api (NestJS), packages/shared
- Frontend: Next.js 15 with Chakra UI v3 configured and working
- Authentication: NextAuth.js with Google OAuth implemented and tested
- Database: Remote PostgreSQL on Render.com connected and operational
- Testing: Jest configured with React Testing Library for component testing
- Header component implemented with authentication state management

### Architecture Context
**Source Documents:**
- [Source: docs/architect/high-level-architecture.md#technical-summary]
- [Source: docs/architect/high-level-architecture.md#repository-structure]
- [Source: docs/prd/user-interface-design-goals.md#key-interaction-paradigms]
- [Source: docs/prd/requirements.md#functional]

### UI Design Requirements
The primary interaction for creators will be a split-pane or toggle view: text input on one side and a live preview of the survey on the other. This provides immediate feedback and reinforces the power of the text-based workflow. [Source: docs/prd/user-interface-design-goals.md#key-interaction-paradigms]

### Functional Requirements
- FR3: An authenticated user must be able to create a new survey by uploading a formatted text file
- FR4: An authenticated user must be able to create a new survey by pasting formatted text directly into a text area in the UI
- FR6: The generated survey URL must display a clean, responsive, and interactive survey-taking page built with Chakra UI
[Source: docs/prd/requirements.md#functional]

### Technical Stack Context
- Frontend: Next.js 15 with Chakra UI v3 for component styling
- Repository Structure: Monorepo with Turborepo
- Package Organization: apps/web for frontend, packages/shared for shared types
- Authentication: NextAuth.js with session management already implemented
[Source: docs/architect/high-level-architecture.md#repository-structure]

### File Locations and Project Structure
Based on established project structure:
- Survey creation page: `apps/web/src/app/create/page.tsx`
- Survey creation components: `apps/web/src/components/survey/`
- Shared survey types: `packages/shared/src/types/`
- Dashboard updates: `apps/web/src/app/dashboard/page.tsx`

### Authentication Integration
The survey creation functionality must integrate with the existing authentication system. Users must be authenticated to create surveys, and surveys must be associated with the authenticated user for later retrieval on the dashboard.

### Testing Standards
**Testing Requirements:** Configure testing frameworks for frontend applications. Create comprehensive tests for survey creation flow including component testing, form validation, and file upload functionality.

**Test Requirements:**
- Unit tests for survey creation components and preview functionality
- Integration tests for complete survey creation workflow
- File upload testing with various file types and error conditions
- Test file locations following established pattern: `src/__tests__/` or `__tests__/` directories
- Testing frameworks: Jest with React Testing Library (already configured)

## Change Log
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 14-Aug-2025 | 1.0 | Initial story creation for Survey Creation UI | Bob (Scrum Master) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results
*This section will be populated by the QA agent during review*